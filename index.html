<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hospital EMR Dashboard</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="sidebar" class="sidebar">
    <h2>Patients</h2>
    <input type="text" id="search" placeholder="Search patient..." oninput="renderPatientList()">
    <div id="patientList"></div>
    <button onclick="openAddPatient()">Add Patient</button>
</div>

<div id="main">
    <div id="placeholder">Select a patient from the sidebar...</div>

    <div id="dashboard" style="display:none;">
        <h2 id="d_name"></h2>
        <p id="d_meta"></p>
        <p>MRN: <span id="d_mrn"></span></p>
        <p>Condition: <span id="d_cond"></span></p>
        <p>Risk: <span id="d_risk"></span></p>

        <canvas id="vitalsChart"></canvas>
        <select id="vitalSelect" onchange="renderCharts()">
            <option value="all">All</option>
            <option value="glucose">Glucose</option>
            <option value="BP">Blood Pressure</option>
            <option value="cholesterol">Cholesterol</option>
        </select>

        <h3>Tests <button onclick="openAddTest()">Add Test</button> <button onclick="deleteLastTest()">Delete Last Test</button></h3>
        <div id="testsList"></div>

        <h3>Notes <button onclick="openAddNote()">Add Note</button> <button onclick="deleteLastNote()">Delete Last Note</button></h3>
        <div id="notesList"></div>

        <h3>Medicines <button onclick="openAddMedicine()">Add Medicine</button></h3>
        <ul id="medList"></ul>

        <h3>AI Insights</h3>
        <div id="insightsContent"></div>
        <div id="aiLabResult"></div>

        <h3>Timeline</h3>
        <ul id="timeline"></ul>

        <h3>AI Chat</h3>
        <div id="chatBox"></div>
        <input type="text" id="chatInput" placeholder="Type a message">
        <button onclick="sendChat()">Send</button>
    </div>
</div>

<!-- Add Patient Form -->
<div id="addPatientCard" class="modal">
    <h3>Add Patient</h3>
    <input type="text" id="newName" placeholder="Name">
    <input type="number" id="newAge" placeholder="Age">
    <input type="text" id="newGender" placeholder="Gender">
    <input type="text" id="newCond" placeholder="Condition">
    <button onclick="addPatientFromForm()">Add</button>
    <button onclick="closeAddPatient()">Cancel</button>
</div>

<!-- Add Test Form -->
<div id="formAddTest" class="modal">
    <h3>Add Test</h3>
    <input type="text" id="testType" placeholder="Test Type">
    <input type="number" id="testValue" placeholder="Value">
    <input type="text" id="testNote" placeholder="Note">
    <input type="date" id="testDate">
    <button onclick="addTestToActive()">Add Test</button>
    <button onclick="closeAddTest()">Cancel</button>
</div>

<!-- Add Note Form -->
<div id="formAddNote" class="modal">
    <h3>Add Note</h3>
    <textarea id="noteText" placeholder="Note text"></textarea>
    <button onclick="addNoteToActive()">Add Note</button>
    <button onclick="closeAddNote()">Cancel</button>
</div>

<!-- Add Medicine Form -->
<div id="formAddMedicine" class="modal">
    <h3>Add Medicine</h3>
    <input type="text" id="medName" placeholder="Name">
    <input type="text" id="medDose" placeholder="Dose">
    <input type="text" id="medFreq" placeholder="Frequency">
    <input type="text" id="medDuration" placeholder="Duration">
    <button onclick="addMedicineToActive()">Add Medicine</button>
    <button onclick="closeAddMedicine()">Cancel</button>
</div>

<script src="script.js"></script>
</body>
</html>

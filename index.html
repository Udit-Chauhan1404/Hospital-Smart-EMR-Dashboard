<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hospital EMR Dashboard</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="sidebar">
    <div class="logo">EMR Patients</div>
    <input type="text" id="search" placeholder="Search patients" oninput="renderPatientList()">
    <div id="patientList"></div>
    <button onclick="openAddPatient()">Add Patient</button>
</div>

<div id="main">
    <div id="placeholder">Select a patient to open dashboard</div>
    
    <div id="dashboard" style="display:none;">
        <div class="patient-info">
            <h2 id="d_name"></h2>
            <p id="d_meta"></p>
            <p>MRN: <span id="d_mrn"></span></p>
            <p>Condition: <span id="d_cond"></span></p>
            <p>Risk: <span id="d_risk"></span></p>
        </div>
        
        <div class="charts">
            <select id="vitalSelect" onchange="renderCharts()">
                <option value="all">All</option>
                <option value="glucose">Glucose</option>
                <option value="cholesterol">Cholesterol</option>
                <option value="BP">BP</option>
            </select>
            <canvas id="vitalsChart"></canvas>
        </div>

        <div class="tests">
            <h3>Tests</h3>
            <div id="testsList"></div>
            <button onclick="openAddTest()">Add Test</button>
            <button onclick="deleteLastTest()">Delete Last Test</button>
        </div>

        <div class="notes">
            <h3>Notes</h3>
            <div id="notesList"></div>
            <button onclick="openAddNote()">Add Note</button>
            <button onclick="deleteLastNote()">Delete Last Note</button>
        </div>

        <div class="medicines">
            <h3>Medicines</h3>
            <ul id="medList"></ul>
            <button onclick="openAddMedicine()">Add Medicine</button>
        </div>

        <div class="insights">
            <h3>AI Insights</h3>
            <div id="insightsContent"></div>
        </div>

        <div class="timeline">
            <h3>Timeline</h3>
            <ul id="timeline"></ul>
        </div>

        <div class="chat">
            <h3>AI Chat</h3>
            <div id="chatBox" class="chat-box"></div>
            <input type="text" id="chatInput" placeholder="Ask a question...">
            <button onclick="sendChat()">Send</button>
        </div>
    </div>
</div>

<!-- Forms -->
<div id="addPatientCard" class="form-card">
    <h3>Add Patient</h3>
    <input type="text" id="newName" placeholder="Name">
    <input type="number" id="newAge" placeholder="Age">
    <input type="text" id="newGender" placeholder="Gender">
    <input type="text" id="newCond" placeholder="Condition">
    <button onclick="addPatientFromForm()">Add</button>
    <button onclick="closeAddPatient()">Cancel</button>
</div>

<div id="formAddTest" class="form-card">
    <h3>Add Test</h3>
    <input type="text" id="testType" placeholder="Type (glucose/BP/etc.)">
    <input type="number" id="testValue" placeholder="Value">
    <input type="text" id="testNote" placeholder="Note">
    <input type="date" id="testDate">
    <button onclick="addTestToActive()">Add Test</button>
    <button onclick="closeAddTest()">Cancel</button>
</div>

<div id="formAddNote" class="form-card">
    <h3>Add Note</h3>
    <textarea id="noteText" placeholder="Note text"></textarea>
    <button onclick="addNoteToActive()">Add Note</button>
    <button onclick="closeAddNote()">Cancel</button>
</div>

<div id="formAddMedicine" class="form-card">
    <h3>Add Medicine</h3>
    <input type="text" id="medName" placeholder="Name">
    <input type="text" id="medDose" placeholder="Dose">
    <input type="text" id="medFreq" placeholder="Frequency">
    <input type="text" id="medDuration" placeholder="Duration (optional)">
    <button onclick="addMedicineToActive()">Add Medicine</button>
    <button onclick="closeAddMedicine()">Cancel</button>
</div>

<script src="script.js"></script>
</body>
</html>

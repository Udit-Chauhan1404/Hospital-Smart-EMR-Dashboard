<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hospital EMR Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Sidebar -->
  <div id="sidebar">
    <h2>Patients</h2>
    <input type="text" id="search" placeholder="Search patient..." oninput="renderPatientList()">
    <div id="patientList"></div>
    <button onclick="openAddPatient()">Add Patient</button>
  </div>

  <!-- Main -->
  <div id="main">
    <div id="placeholder">Select a patient from the sidebar...</div>

    <div id="dashboard" style="display:none;">
      <h1 id="d_name"></h1>
      <p id="d_meta"></p>
      <p><b>MRN:</b> <span id="d_mrn"></span></p>
      <p><b>Condition:</b> <span id="d_cond"></span></p>
      <p><b>Risk:</b> <span id="d_risk"></span></p>

      <!-- Charts -->
      <div class="charts">
        <h2>Vitals</h2>
        <select id="vitalSelect" onchange="renderCharts()">
          <option value="all">All</option>
          <option value="glucose">Glucose</option>
          <option value="cholesterol">Cholesterol</option>
          <option value="BP">Blood Pressure</option>
        </select>
        <canvas id="vitalsChart"></canvas>
      </div>

      <!-- Tests -->
      <div class="tests">
        <h2>Tests</h2>
        <div id="testsList"></div>
        <button onclick="openAddTest()">Add Test</button>
        <button onclick="deleteLastTest()">Delete Last Test</button>
      </div>

      <!-- Notes -->
      <div class="notes">
        <h2>Notes</h2>
        <div id="notesList"></div>
        <button onclick="openAddNote()">Add Note</button>
        <button onclick="deleteLastNote()">Delete Last Note</button>
      </div>

      <!-- Medicines -->
      <div class="medicines">
        <h2>Medicines</h2>
        <ul id="medList"></ul>
        <button onclick="openAddMedicine()">Add Medicine</button>
        <button onclick="deleteLastMedicine()">Delete Last Medicine</button>
      </div>

      <!-- Insights -->
      <div class="insights">
        <h2>AI Insights</h2>
        <div id="insightsContent"></div>
      </div>

      <!-- AI Lab -->
      <div class="ailab">
        <h2>AI Lab</h2>
        <div id="aiLabResult"></div>
      </div>

      <!-- Timeline -->
      <div class="timeline">
        <h2>Timeline</h2>
        <ul id="timeline"></ul>
      </div>

      <!-- AI Chat -->
      <div class="chat">
        <h2>AI Assistant</h2>
        <div id="chatBox" class="chat-box"></div>
        <input type="text" id="chatInput" placeholder="Ask something...">
        <button onclick="sendChat()">Send</button>
      </div>
    </div>
  </div>

  <!-- Forms -->
  <!-- Add Patient Form -->
  <div id="addPatientCard" class="form-card">
    <h3>Add Patient</h3>
    <label>Name:</label>
    <input type="text" id="newName">
    <label>Age:</label>
    <input type="number" id="newAge">
    <label>Gender:</label>
    <input type="text" id="newGender">
    <label>Condition:</label>
    <input type="text" id="newCond">
    <div>
      <button onclick="addPatientFromForm()">Add</button>
      <button onclick="closeAddPatient()">Cancel</button>
    </div>
  </div>

  <!-- Add Test Form -->
  <div id="formAddTest" class="form-card">
    <h3>Add Test</h3>
    <label>Type:</label>
    <input type="text" id="testType">
    <label>Value:</label>
    <input type="number" id="testValue">
    <label>Note:</label>
    <input type="text" id="testNote">
    <label>Date:</label>
    <input type="date" id="testDate">
    <div>
      <button onclick="addTestToActive()">Add</button>
      <button onclick="closeAddTest()">Cancel</button>
    </div>
  </div>

  <!-- Add Note Form -->
  <div id="formAddNote" class="form-card">
    <h3>Add Note</h3>
    <textarea id="noteText"></textarea>
    <div>
      <button onclick="addNoteToActive()">Add</button>
      <button onclick="closeAddNote()">Cancel</button>
    </div>
  </div>

  <!-- Add Medicine Form -->
  <div id="formAddMedicine" class="form-card">
    <h3>Add Medicine</h3>
    <label>Name:</label>
    <input type="text" id="medName">
    <label>Dose:</label>
    <input type="text" id="medDose">
    <label>Frequency:</label>
    <input type="text" id="medFreq">
    <label>Duration:</label>
    <input type="text" id="medDuration">
    <div>
      <button onclick="addMedicineToActive()">Add</button>
      <button onclick="closeAddMedicine()">Cancel</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>

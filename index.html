<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart EMR Dashboard</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Loader -->
  <div id="loader" class="loader">Loading...</div>

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <h2>EMR Patients</h2>
      <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
    </div>
    <input type="text" id="search" placeholder="Search patients..." oninput="renderPatientList()">
    <div id="patientList" class="patient-list"></div>
    <button class="add-btn" onclick="openAddPatient()">+ Add Patient</button>
  </div>

  <!-- Main Content -->
  <div class="main">
    <!-- Placeholder -->
    <div id="placeholder" class="placeholder">
      <h1>Welcome to Smart EMR Dashboard</h1>
      <p>Select a patient from the sidebar to view details.</p>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard" style="display:none;">
      <div class="patient-info">
        <h2 id="d_name"></h2>
        <p id="d_meta"></p>
        <p>MRN: <span id="d_mrn"></span></p>
        <p>Condition: <span id="d_cond"></span></p>
        <p>Risk: <span id="d_risk"></span></p>
      </div>

      <!-- Charts -->
      <div class="vitals">
        <label for="vitalSelect">Select Vitals:</label>
        <select id="vitalSelect" onchange="renderCharts()">
          <option value="all">All</option>
          <option value="glucose">Glucose</option>
          <option value="BP">Blood Pressure</option>
          <option value="cholesterol">Cholesterol</option>
        </select>
        <canvas id="vitalsChart"></canvas>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <div class="tab">
          <h3>Tests <button onclick="openAddTest()">+ Add</button></h3>
          <div id="testsList" class="tab-content"></div>
        </div>
        <div class="tab">
          <h3>Notes <button onclick="openAddNote()">+ Add</button></h3>
          <div id="notesList" class="tab-content"></div>
        </div>
        <div class="tab">
          <h3>Medicines <button onclick="openAddMedicine()">+ Add</button></h3>
          <ul id="medList" class="tab-content"></ul>
        </div>
        <div class="tab">
          <h3>Insights</h3>
          <div id="insightsContent" class="tab-content"></div>
        </div>
      </div>

      <!-- Timeline -->
      <div class="timeline-section">
        <h3>Timeline</h3>
        <ul id="timeline" class="timeline"></ul>
      </div>

      <!-- AI Chat -->
      <div class="chat-section">
        <h3>AI Assistant</h3>
        <div id="chatBox" class="chat-box"></div>
        <input type="text" id="chatInput" placeholder="Ask something..." onkeydown="if(event.key==='Enter') sendChat()">
        <button onclick="sendChat()">Send</button>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <div id="addPatientCard" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddPatient()">&times;</span>
      <h3>Add Patient</h3>
      <input id="newName" placeholder="Name">
      <input id="newAge" placeholder="Age" type="number">
      <input id="newGender" placeholder="Gender">
      <input id="newCond" placeholder="Condition">
      <button onclick="addPatientFromForm()">Add</button>
    </div>
  </div>

  <div id="formAddTest" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddTest()">&times;</span>
      <h3>Add Test</h3>
      <input id="testType" placeholder="Type (glucose/BP/cholesterol)">
      <input id="testValue" placeholder="Value" type="number">
      <input id="testNote" placeholder="Note">
      <input id="testDate" type="date">
      <button onclick="addTestToActive()">Add Test</button>
    </div>
  </div>

  <div id="formAddNote" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddNote()">&times;</span>
      <h3>Add Note</h3>
      <textarea id="noteText" placeholder="Enter note"></textarea>
      <button onclick="addNoteToActive()">Add Note</button>
    </div>
  </div>

  <div id="formAddMedicine" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddMedicine()">&times;</span>
      <h3>Add Medicine</h3>
      <input id="medName" placeholder="Medicine Name">
      <input id="medDose" placeholder="Dose">
      <input id="medFreq" placeholder="Frequency">
      <input id="medDuration" placeholder="Duration">
      <button onclick="addMedicineToActive()">Add Medicine</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
